# Основные принципы

Confidential Layer это прослойка, обеспечивающая обмен активами между блокчейнами. Валидация транзакций выполняется сетью валидаторов. Безопасность обеспечивается разделением секретного ключа между валидаторами. Надёжность и прозрачность обеспечивается блокчейном, запущенным на основе протокола tendermint. Список доступных к обмену активов предопределён и может быть изменён только в результате процедуры governance.

# Описание процесса перевода
Для перевода активов требуется отправить их на смарт-контракт в сети назначения, указав сеть получения и адрес получателя. Для получения средств в сети назначения требуется отправить транзакцию разблокировки средств. Транзакция разблокировки переводит средства из смарт-контракта на адрес получателя. Транзакция разблокировки проверяется на открытом ключе, заданным политкой смарт-контракта.

# Валидаторы
Секретный ключ разделён между всеми валидаторами и не собирается в процессе формирования подписи. Каждый из валидаторов независимо от других принимает решение о вхождении в коалицию по подписыванию транзакции разблокирования. Для успешного подписания транзакции разблокирования требуется коалиция из не менее чем **K** валидаторов. Формирование подписи происходит в несколько этапов, для выполнения каждого этапа требуется обмен данными между участниками коалиции. Обмен данными осуществляется через смарт-контракт в сети Confidential Layer, что позволяет протоколировать работу валидаторов и управлять вознаграждениями. Обмен данными между валидаторами шифруется на их публичных ключах.

# Стейки, комиссии, вознаграждения, слешинг

Для того, чтобы стать валидатором, необходимо застейкать на смарт-контракте в сети Confidential Layer необходимое количество монет. Работа сети разделена на эпохи. В начале каждой эпохи список валидаторов обновляется в соответствии с их стейками, формируются доли нового секретного ключа и соответсвующий открытый ключ. Новый открытый ключ регистрируется в смарт-контрактах сетей с помощью механизма governance.

За перевод средств взимается комиссия, выраженная в отправляемых активах. Собраные комиссии аккумулируются на смарт-контрактах, обмениваются на ликвидные активы и распределяются между аккаунтами валидаторов в соответствии с политикой governance.

Комиссия сети за выполнение транзакции разблокировки оплачивается смарт-контрактом в сети назначения.

Вся активность валидаторов фиксируется в блокчейне Confidential Layer. За саботаж системы (неактивность, спам, ложные транзакции), валидаторы подвергаются наказанию в виде отъёма части стейка. Слешинг инициируется любым валидатором путём создания специальной транзакции. Транзакция должна быть подписана коалицией из не менее чем **K** валидаторов. Часть изъятых средств распределяется между подписавшими транзакцию участниками, что мотивирует валидаторы следить за здоровьем сети.

# Governance

Механизм governance позволяет коалиции из **K** валидаторов производить следующие действия:
- обновлять открытый ключ, на котором проверяются транзакции смарт-контракта
- изменять список доступных к обмену активов
- изменять размер комиссий за переводы
- изменять правила продажи собранных комиссий
- изменять параметры слешинга

# Безопасность системы

Средства на смарт-контракте в сети назначения защищены консенсусом сети и ключом смарт-контракта. Для их хищения требуется либо нарушить работу сети назначения, либо скомпрометировать ключ смарт-контракта. Ключ смарт-контракта никогда не собирается в процессе нормальной работы. Тем не менее, существует возможность его компрометации при сговоре не менее чем **K** валидаторов. Компрометация Confidential Layer также может привести к компрометации ключа путём подмены данных о стейках валидаторов.

## Математические основы

В основе системы лежит схема разделения секрета Шамира.